<!-- Breadcrumb -->
<div class="breadcrumb-bar">
    <div class="container">
        <div class="row align-items-center inner-banner">
            <div class="col-md-12 col-12 text-center">
                <nav aria-label="breadcrumb" class="page-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a routerLink="/"><i class="isax isax-home-15"></i></a></li>
                        <li class="breadcrumb-item active">Chi tiết lịch hẹn</li>
                    </ol>
                    <h2 class="breadcrumb-title">Chi tiết lịch hẹn</h2>
                </nav>
            </div>
        </div>
    </div>
    <div class="breadcrumb-bg">
        <img src="assets/img/bg/breadcrumb-bg-01.png" alt="img" class="breadcrumb-bg-01">
        <img src="assets/img/bg/breadcrumb-bg-02.png" alt="img" class="breadcrumb-bg-02">
        <img src="assets/img/bg/breadcrumb-icon.png" alt="img" class="breadcrumb-bg-03">
        <img src="assets/img/bg/breadcrumb-icon.png" alt="img" class="breadcrumb-bg-04">
    </div>
</div>
<!-- /Breadcrumb -->

<!-- Page Content -->
<div class="content">
    <div class="container">
        @if (loading) {
            <div class="text-center py-5">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Đang tải...</span>
                </div>
            </div>
        }

        @if(error){
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
        }
        @if (appointment && !loading) {
        <div class="row">
            <div class="col-lg-8 offset-lg-2">
                <div class="card invoice-card">
                    <div class="card-body">

                        <!-- Invoice Header -->
                        <div class="invoice-header">
                            <div class="row align-items-center">
                                <div class="col-sm-6">
                                    <h4 class="invoice-title">Chi tiết lịch hẹn</h4>
                                    <p class="mb-0">Mã: <strong>#{{ appointment.appointmentId.substring(0, 8)
                                            }}</strong></p>
                                </div>
                                <div class="col-sm-6 text-sm-end">
                                    <span class="badge" [ngClass]="getStatusClass(appointment.status)">
                                        {{ getStatusText(appointment.status) }}
                                    </span>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Appointment Info -->
                        <div class="invoice-info">
                            <div class="row">
                                <div class="col-sm-6 mb-4">
                                    <h6 class="text-muted mb-3">Thông tin bác sĩ</h6>
                                    <p class="mb-1"><strong>{{ appointment.doctorName }}</strong></p>
                                    <p class="mb-1 text-muted">{{ appointment.specialtyName }}</p>
                                    <p class="mb-0 text-muted"><i class="feather-phone me-1"></i>{{
                                        appointment.doctorPhone }}</p>
                                </div>
                                <div class="col-sm-6 mb-4">
                                    <h6 class="text-muted mb-3">Thông tin bệnh nhân</h6>
                                    <p class="mb-1"><strong>{{ appointment.patientName }}</strong></p>
                                    <p class="mb-1 text-muted"><i class="feather-mail me-1"></i>{{
                                        appointment.patientEmail }}</p>
                                    <p class="mb-0 text-muted"><i class="feather-phone me-1"></i>{{
                                        appointment.patientPhone }}</p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-6 mb-4">
                                    <h6 class="text-muted mb-3">Thời gian khám</h6>
                                    <p class="mb-1"><i class="feather-calendar me-2"></i>{{
                                        formatDate(appointment.appointmentDate) }}</p>
                                    <p class="mb-0"><i class="feather-clock me-2"></i>{{
                                        formatTime(appointment.startTime) }} - {{ formatTime(appointment.endTime) }}</p>
                                </div>
                                <div class="col-sm-6 mb-4">
                                    <h6 class="text-muted mb-3">Chi phí khám</h6>
                                    <h4 class="text-primary mb-0">{{ formatPrice(appointment.consultationFee) }}</h4>
                                </div>
                            </div>


                            @if(appointment.notes){
                            <div class="row">
                                <div class="col-12 mb-4">
                                    <h6 class="text-muted mb-3">Ghi chú</h6>
                                    <p class="mb-0">{{ appointment.notes }}</p>
                                </div>
                            </div>
                            }

                            <div class="row">
                                <div class="col-sm-6">
                                    <p class="text-muted mb-0">
                                        <small>Ngày tạo: {{ formatDateTime(appointment.createdAt) }}</small>
                                    </p>
                                </div>
                                <div class="col-sm-6 text-sm-end">
                                    <p class="text-muted mb-0">
                                        <small>Cập nhật: {{ formatDateTime(appointment.updatedAt) }}</small>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Actions -->
                        <div class="invoice-actions text-center">
                            <button class="btn btn-primary me-2" (click)="printInvoice()">
                                <i class="feather-printer me-1"></i> In
                            </button>
                            <button class="btn btn-outline-secondary" (click)="goBack()">
                                <i class="feather-arrow-left me-1"></i> Quay lại
                            </button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        }


    </div>
</div>
<!-- /Page Content -->